<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  class="h-full bg-slate-900">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="Atakan Akdogan">

  <title layout:title-pattern="$CONTENT_TITLE | Fantasy Toys">Fantasy Toys</title>
  <link rel="icon" type="image/png" href="/images/favicon.png" />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          },
          colors: {
            slate: {
              850: '#1e293b', // Custom dark
              900: '#0f172a',
              950: '#020617',
            }
          }
        }
      }
    }
  </script>

  <!-- Custom CSS for specific overrides or scrollbars -->
  <link href="/css/modern-theme.css" rel="stylesheet">

  <!-- DataTables (Core Only, we will custom style) -->
  <link rel="stylesheet" href="https://cdn.datatables.net/2.0.8/css/dataTables.dataTables.min.css">

  <style>
    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #0f172a;
    }

    ::-webkit-scrollbar-thumb {
      background: #334155;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #475569;
    }

    /* DataTable Customization for Dark Mode */
    table.dataTable.display tbody tr {
      background-color: transparent !important;
    }

    table.dataTable.display tbody td {
      background-color: transparent !important;
      color: #cbd5e1;
    }

    .dataTables_wrapper .dataTables_length,
    .dataTables_wrapper .dataTables_filter,
    .dataTables_wrapper .dataTables_info,
    .dataTables_wrapper .dataTables_processing,
    .dataTables_wrapper .dataTables_paginate {
      color: #94a3b8 !important;
    }

    .dataTables_wrapper .dataTables_length select,
    .dataTables_wrapper .dataTables_filter input {
      background-color: #1e293b;
      border: 1px solid #334155;
      color: #e2e8f0;
      padding: 4px;
      border-radius: 4px;
    }
  </style>
</head>

<body class="h-full text-slate-300 antialiased selection:bg-indigo-500 selection:text-white">

  <div th:if="${_csrf}" id="csrf-token" th:data-csrf-header="${_csrf.headerName}" th:data-csrf-token="${_csrf.token}"
    class="hidden">
  </div>

  <!-- Mobile Offcanvas Backdrop (hidden by default) -->
  <div id="mobile-backdrop" class="fixed inset-0 bg-black/50 z-40 hidden md:hidden transition-opacity"
    onclick="toggleSidebar()"></div>

  <div class="flex h-full flex-col md:flex-row">

    <!-- Sidebar -->
    <aside id="sidebar"
      class="fixed inset-y-0 left-0 z-50 w-64 transform -translate-x-full bg-slate-900/95 backdrop-blur-xl border-r border-slate-800 transition-transform duration-300 ease-in-out md:static md:translate-x-0 md:bg-slate-900/50">
      <div class="flex h-full flex-col">
        <!-- Logo -->
        <div class="flex h-16 items-center border-b border-slate-800 px-6">
          <a th:href="@{/signin}"
            class="flex items-center gap-2 text-lg font-bold text-white hover:text-indigo-400 transition-colors">
            <span>üèÄ</span>
            <span>Fantasy Toys</span>
          </a>
          <button class="ml-auto md:hidden text-slate-400 hover:text-white" onclick="toggleSidebar()">
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>

        <!-- Navigation -->
        <div class="flex-1 overflow-y-auto py-4">
          <nav class="space-y-1 px-3">
            <!-- Included Sidebar Fragment -->
            <div th:replace="~{layout/sidebar :: sidebar}"></div>
          </nav>
        </div>

        <!-- User / Logout -->
        <div class="border-t border-slate-800 p-4">
          <div class="rounded-lg bg-slate-800/50 p-3 text-center">
            <a href="javascript: document.logoutForm.submit()"
              class="block w-full text-sm font-medium text-red-400 hover:text-red-300">Sign Out</a>
            <form name="logoutForm" th:action="@{/logout}" method="post" hidden="hidden">
              <input type="submit" value="Log Out" />
            </form>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <div class="flex flex-1 flex-col overflow-hidden">
      <!-- Top Header (Mobile Only Toggle) -->
      <header class="flex h-16 items-center border-b border-slate-800 bg-slate-900/50 backdrop-blur px-4 md:hidden">
        <button onclick="toggleSidebar()" class="text-slate-400 hover:text-white">
          <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
        <span class="ml-4 font-semibold text-white">Fantasy Toys</span>
      </header>

      <!-- Content Scroll Area -->
      <main class="flex-1 overflow-y-auto bg-slate-900 p-4 md:p-8">
        <!-- Filter Options (Persistent) -->
        <div class="mx-auto max-w-7xl animate-fade-in-up mb-6">
          <div th:replace="~{layout/filters :: filters}"></div>
        </div>

        <div layout:fragment="content" class="mx-auto max-w-7xl animate-fade-in-up">
          <!-- Content goes here -->
        </div>
      </main>
    </div>

  </div>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.datatables.net/2.0.8/js/dataTables.min.js"></script>

  <script>
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const backdrop = document.getElementById('mobile-backdrop');

      if (sidebar.classList.contains('-translate-x-full')) {
        sidebar.classList.remove('-translate-x-full');
        backdrop.classList.remove('hidden');
      } else {
        sidebar.classList.add('-translate-x-full');
        backdrop.classList.add('hidden');
      }
    }
  </script>

  <th:block layout:fragment="page-scripts">
  </th:block>

</body>

</html>